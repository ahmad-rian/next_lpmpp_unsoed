generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Role {
  id          String           @id @default(cuid())
  name        String           @unique
  displayName String
  description String?          @db.Text
  color       String           @default("#6366f1")
  isSystem    Boolean          @default(false)
  createdAt   DateTime         @default(now())
  updatedAt   DateTime         @updatedAt
  permissions RolePermission[]
  users       UserRole[]

  @@index([name])
}

model Permission {
  id          String           @id @default(cuid())
  name        String           @unique
  displayName String
  module      String
  description String?          @db.Text
  createdAt   DateTime         @default(now())
  updatedAt   DateTime         @updatedAt
  roles       RolePermission[]

  @@index([name])
  @@index([module])
}

model RolePermission {
  id           String     @id @default(cuid())
  roleId       String
  permissionId String
  createdAt    DateTime   @default(now())
  permission   Permission @relation(fields: [permissionId], references: [id], onDelete: Cascade)
  role         Role       @relation(fields: [roleId], references: [id], onDelete: Cascade)

  @@unique([roleId, permissionId])
  @@index([roleId])
  @@index([permissionId])
}

model UserRole {
  id        String   @id @default(cuid())
  userId    String
  roleId    String
  createdAt DateTime @default(now())
  role      Role     @relation(fields: [roleId], references: [id], onDelete: Cascade)
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, roleId])
  @@index([userId])
  @@index([roleId])
}

model User {
  id            String     @id @default(cuid())
  name          String?
  email         String     @unique
  emailVerified DateTime?
  image         String?
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
  password      String?
  isActive      Boolean    @default(true)
  accounts      Account[]
  sessions      Session[]
  roles         UserRole[]
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String? @db.Text
  access_token      String? @db.Text
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String? @db.Text
  session_state     String?
  user              User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
  @@index([userId], map: "Account_userId_fkey")
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId], map: "Session_userId_fkey")
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}

model SiteConfig {
  id               String   @id @default(cuid())
  logoUnsoed       String?  @db.Text
  logoApp          String?  @db.Text
  siteName         String   @default("LPMPP UNSOED")
  visi             String?  @db.Text
  misi             String?  @db.Text
  tugas            String?  @db.Text
  fungsi           String?  @db.Text
  alamat           String?  @db.Text
  email            String?
  instagramUrl     String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  logoDescription  String?  @db.Text
  carouselImages   String?  @db.Text
  misiUnsoed       String?  @db.Text
  visiUnsoed       String?  @db.Text
  gambarInformasi  String?  @db.Text
  gambarPartner    String?  @db.Text
  gambarSlogan     String?  @db.Text
  gambarStaff      String?  @db.Text
  gambarTambahan   String?  @db.Text
  gambarTeam       String?  @db.Text
  informasiLayanan String?  @db.Text
  layananKami      String?  @db.Text
  pelatihan        String?  @db.Text
  pembelajaran     String?  @db.Text
  penjaminanMutu   String?  @db.Text
  headMessage      String?  @db.Text
  motto            String?  @db.Text
  tagline          String?  @db.Text
}

model Leadership {
  id        String             @id @default(cuid())
  position  LeadershipPosition @unique
  name      String
  title     String?            @db.Text
  photo     String?            @db.Text
  createdAt DateTime           @default(now())
  updatedAt DateTime           @updatedAt
}

model Staff {
  id        String        @id @default(cuid())
  position  StaffPosition
  name      String
  title     String?       @db.Text
  photo     String?       @db.Text
  order     Int           @default(0)
  createdAt DateTime      @default(now())
  updatedAt DateTime      @updatedAt

  @@index([position, order])
}

model Center {
  id          String         @id @default(cuid())
  name        String
  slug        String         @unique
  description String?        @db.Text
  order       Int            @default(0)
  isActive    Boolean        @default(true)
  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt
  members     CenterMember[]

  @@index([order])
}

model CenterMember {
  id        String           @id @default(cuid())
  centerId  String
  role      CenterMemberRole
  name      String
  title     String?          @db.Text
  photo     String?          @db.Text
  order     Int              @default(0)
  createdAt DateTime         @default(now())
  updatedAt DateTime         @updatedAt
  center    Center           @relation(fields: [centerId], references: [id], onDelete: Cascade)

  @@index([centerId, role, order])
}

model SpmiContent {
  id        String   @id @default(cuid())
  section   String   @unique
  content   String   @db.Text
  order     Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Document {
  id          String       @id @default(cuid())
  type        DocumentType
  title       String
  description String?      @db.Text
  fileUrl     String       @db.Text
  fileName    String
  fileSize    Int?
  order       Int          @default(0)
  isActive    Boolean      @default(true)
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt

  @@index([type, order])
}

model Faculty {
  id                     String                  @id @default(cuid())
  name                   String                  @unique
  shortName              String?
  code                   String?                 @unique
  order                  Int                     @default(0)
  isActive               Boolean                 @default(true)
  createdAt              DateTime                @default(now())
  updatedAt              DateTime                @updatedAt
  qualityAssuranceGroups QualityAssuranceGroup[]

  @@index([order])
}

model QualityAssuranceGroup {
  id          String                     @id @default(cuid())
  description String?                    @db.Text
  contactInfo String?                    @db.Text
  order       Int                        @default(0)
  isActive    Boolean                    @default(true)
  createdAt   DateTime                   @default(now())
  updatedAt   DateTime                   @updatedAt
  facultyId   String
  directUrl   String?                    @db.Text
  ketuaGpm    String?
  links       GPMLink[]
  documents   QualityAssuranceDocument[]
  faculty     Faculty                    @relation(fields: [facultyId], references: [id], onDelete: Cascade)

  @@index([facultyId])
  @@index([order])
}

model GPMLink {
  id          String                @id @default(cuid())
  groupId     String
  title       String
  url         String                @db.Text
  description String?               @db.Text
  order       Int                   @default(0)
  createdAt   DateTime              @default(now())
  updatedAt   DateTime              @updatedAt
  group       QualityAssuranceGroup @relation(fields: [groupId], references: [id], onDelete: Cascade)

  @@index([groupId, order])
}

model QualityAssuranceDocument {
  id        String                @id @default(cuid())
  groupId   String
  title     String
  fileUrl   String                @db.Text
  fileName  String
  fileSize  Int?
  order     Int                   @default(0)
  createdAt DateTime              @default(now())
  updatedAt DateTime              @updatedAt
  group     QualityAssuranceGroup @relation(fields: [groupId], references: [id], onDelete: Cascade)

  @@index([groupId, order])
}

model SpmiInformationSystem {
  id          String   @id @default(cuid())
  name        String
  shortName   String?
  description String?  @db.Text
  logoUrl     String?  @db.Text
  websiteUrl  String?  @db.Text
  category    String?
  order       Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([order])
  @@index([isActive])
  @@index([category])
}

model UniversityRanking {
  id           String             @id @default(cuid())
  institution  RankingInstitution
  year         Int
  rankNational Int?
  rankWorld    Int?
  rankAsia     Int?
  score        Float?
  badge        String?
  description  String?            @db.Text
  sourceUrl    String?            @db.Text
  logoUrl      String?            @db.Text
  isActive     Boolean            @default(true)
  createdAt    DateTime           @default(now())
  updatedAt    DateTime           @updatedAt

  @@unique([institution, year])
  @@index([institution])
  @@index([year])
  @@index([isActive])
}

model InternationalAccreditation {
  id                String   @id @default(cuid())
  order             Int      @default(0)
  isActive          Boolean  @default(true)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  accreditationBody String   @db.Text
  faculty           String
  studyProgram      String

  @@index([order])
  @@index([isActive])
}

model StudyProgramAccreditation {
  id             String             @id @default(cuid())
  level          AccreditationLevel
  skNumber       String?
  skYear         Int?
  order          Int                @default(0)
  isActive       Boolean            @default(true)
  createdAt      DateTime           @default(now())
  updatedAt      DateTime           @updatedAt
  certificateUrl String?            @db.Text
  korprodi       String?
  rank           AccreditationRank?
  studyProgram   String
  validFrom      DateTime?
  validUntil     DateTime?

  @@index([level])
  @@index([rank])
  @@index([order])
  @@index([isActive])
}

model UniversityAccreditation {
  id          String                            @id @default(cuid())
  title       String
  description String?                           @db.Text
  imageUrl    String?                           @db.Text
  isActive    Boolean                           @default(true)
  createdAt   DateTime                          @default(now())
  updatedAt   DateTime                          @updatedAt
  documents   UniversityAccreditationDocument[]
}

model UniversityAccreditationDocument {
  id              String                  @id @default(cuid())
  accreditationId String
  title           String
  documentUrl     String                  @db.Text
  documentName    String?
  order           Int                     @default(0)
  createdAt       DateTime                @default(now())
  updatedAt       DateTime                @updatedAt
  accreditation   UniversityAccreditation @relation(fields: [accreditationId], references: [id], onDelete: Cascade)

  @@index([accreditationId, order])
}

model FeaturedProgram {
  id           String   @id @default(cuid())
  title        String
  slug         String   @unique
  description  String?  @db.Text
  documentUrl  String?  @db.Text
  documentName String?
  icon         String?
  order        Int      @default(0)
  isActive     Boolean  @default(true)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@index([order])
}

model Expertise {
  id         String        @id @default(cuid())
  type       ExpertiseType
  name       String
  order      Int           @default(0)
  isActive   Boolean       @default(true)
  createdAt  DateTime      @default(now())
  updatedAt  DateTime      @updatedAt
  profileUrl String?       @db.Text

  @@index([type, order])
}

model Link {
  id        String   @id @default(cuid())
  name      String
  url       String   @db.Text
  order     Int      @default(0)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([order])
}

model News {
  id            String   @id @default(cuid())
  title         String   @db.Text
  slug          String   @unique
  excerpt       String   @db.Text
  content       String   @db.LongText
  coverImage    String?  @db.Text
  author        String
  publishedAt   DateTime @default(now())
  isPublished   Boolean  @default(false)
  viewCount     Int      @default(0)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  galleryImages String?  @db.Text

  @@index([slug])
  @@index([publishedAt])
  @@index([isPublished])
}

model Download {
  id            String   @id @default(cuid())
  name          String   @db.Text
  description   String?  @db.Text
  fileUrl       String   @db.Text
  fileType      String
  fileSize      Int
  downloadCount Int      @default(0)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@index([name(length: 191)])
  @@index([createdAt])
}

model DataBuku {
  id        String   @id @default(cuid())
  judul     String   @db.Text
  deskripsi String?  @db.Text
  gambar    String?  @db.Text
  link      String?  @db.Text
  order     Int      @default(0)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([order])
  @@index([isActive])
}

model DataGaleri {
  id        String   @id @default(cuid())
  judul     String?  @db.Text
  gambar    String   @db.Text
  deskripsi String?  @db.Text
  order     Int      @default(0)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([order])
  @@index([isActive])
}

model TautanLayanan {
  id        String   @id @default(cuid())
  nama      String
  gambar    String?  @db.Text
  link      String   @db.Text
  deskripsi String?  @db.Text
  order     Int      @default(0)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([order])
  @@index([isActive])
}

model SpmiAbout {
  id        String   @id @default(cuid())
  title     String   @default("SPM Unsoed")
  tujuan    String   @db.Text
  fungsi    String   @db.Text
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Agenda {
  id          String   @id @default(cuid())
  title       String   @db.Text
  date        DateTime
  startTime   String
  endTime     String
  location    String   @db.Text
  description String?  @db.Text
  color       String   @default("#f59e0b")
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([date])
  @@index([isActive])
}

enum LeadershipPosition {
  HEAD
  SECRETARY
}

enum StaffPosition {
  SUB_COORDINATOR
  GENERAL_STAFF
  PROGRAM_DATA_INFO_STAFF
  DRIVER
  OFFICE_ASSISTANT
}

enum CenterMemberRole {
  COORDINATOR
  MEMBER
}

enum DocumentType {
  SPMI
  AUDIT
  REGULATION
}

enum RankingInstitution {
  WEBOMETRICS
  QS
  APPLIEDHE
  THE_WUR
  SCOPUS
}

enum AccreditationLevel {
  D3
  PROFESI
  S1
  S2
  S3
  SPESIALIS
}

enum AccreditationRank {
  UNGGUL
  BAIK_SEKALI
  BAIK
  TERAKREDITASI
  A
  B
  C
}

enum ExpertiseType {
  FASILITATOR_PEKERTI
  AUDITOR_SPMI
  ASESOR_BKD
  ASESOR_SERDOS
}
